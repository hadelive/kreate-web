import { parseLovelaceAmount } from ".";

describe("parseLovelaceAmount", () => {
  test("manual cases", () => {
    expect(parseLovelaceAmount("1.23")).toBe(BigInt("1230000"));
    expect(parseLovelaceAmount("1.2345678")).toBe(BigInt("1234568"));
    expect(parseLovelaceAmount("-1")).toBe(undefined);
    expect(parseLovelaceAmount("0.")).toBe(BigInt(0));
    expect(parseLovelaceAmount("0")).toBe(BigInt(0));
    expect(parseLovelaceAmount("000")).toBe(BigInt(0));
    expect(parseLovelaceAmount("1.")).toBe(BigInt(1000000));
  });

  test.each([
    [
      "8107374182411048576655361000000010077696100.390625",
      "8107374182411048576655361000000010077696100390625",
    ],
    [
      "100000656110485763226214419683823543256.1",
      "100000656110485763226214419683823543256100000",
    ],
    [
      "32279936100000327681953125107374182412536.512",
      "32279936100000327681953125107374182412536512000",
    ],
    [
      "10244304672125466561100000000512100000.65536",
      "10244304672125466561100000000512100000655360",
    ],
    [
      "168071007769610000100000000168071100000008.60466176",
      "168071007769610000100000000168071100000008604662",
    ],
    [
      "262144120971527297812565619387420489.2187",
      "262144120971527297812565619387420489218700",
    ],
    [
      "32156251256262144656131253125.59049",
      "32156251256262144656131253125590490",
    ],
    [
      "576480110246251000001000024365611.1",
      "576480110246251000001000024365611100000",
    ],
    [
      "2566046617659049682354382354382354310077696.1000",
      "2566046617659049682354382354382354310077696100000",
    ],
    [
      "59049655361000005314412524316796162.4782969",
      "59049655361000005314412524316796162478297",
    ],
    [
      "976562564591000043046721864.10077696",
      "976562564591000043046721864100777",
    ],
    [
      "343361968397656251007769625642.59049",
      "343361968397656251007769625642590490",
    ],
    [
      "5314411691968377761000000002565.1",
      "5314411691968377761000000002565100000",
    ],
    [
      "256100000000065536312549655365121000000000.1",
      "256100000000065536312549655365121000000000100000",
    ],
    [
      "110000047829695641000000004782969262144.27",
      "110000047829695641000000004782969262144270000",
    ],
    [
      "209715253144142621443125101000004782969.1",
      "209715253144142621443125101000004782969100000",
    ],
    [
      "10077696478296910241677721636100125262144.1",
      "10077696478296910241677721636100125262144100000",
    ],
    [
      "64271590491562512966100000000.3125",
      "64271590491562512966100000000312500",
    ],
    [
      "10000000000729209715297656258196831679616243.59049",
      "10000000000729209715297656258196831679616243590490",
    ],
    [
      "644096497297291100000000003486784401.3486784401",
      "644096497297291100000000003486784401348678",
    ],
    [
      "348678440181111100000000053144110.1024",
      "348678440181111100000000053144110102400",
    ],
    [
      "823543387420489243218710000010001286561.512",
      "823543387420489243218710000010001286561512000",
    ],
    [
      "1000002097152100000000010000000000100000100000010008.512",
      "1000002097152100000000010000000000100000100000010008512000",
    ],
    [
      "65611282475249719531254304672132768256.128",
      "65611282475249719531254304672132768256128000",
    ],
    [
      "312547625312526214478125100000000.10000",
      "312547625312526214478125100000000100000",
    ],
    [
      "5904965536168074304672164134364.256",
      "5904965536168074304672164134364256000",
    ],
    [
      "218782354310737418246251073741824976562511679616.10000",
      "218782354310737418246251073741824976562511679616100000",
    ],
    [
      "262144343102415904911638465536.128",
      "262144343102415904911638465536128000",
    ],
    [
      "9168072097152196836258110077696.1296",
      "9168072097152196836258110077696129600",
    ],
    [
      "65612436860466176348678440149390625.390625",
      "65612436860466176348678440149390625390625",
    ],
    [
      "114304672110100000015764801387420489.243",
      "114304672110100000015764801387420489243000",
    ],
    [
      "1466564782969781252716384156254.6561",
      "1466564782969781252716384156254656100",
    ],
    [
      "6255764801282475249100000000976562516497.1",
      "6255764801282475249100000000976562516497100000",
    ],
    [
      "12961000000051210000000009812561.10077696",
      "12961000000051210000000009812561100777",
    ],
    [
      "655365314411665613276821000001073741824.9765625",
      "655365314411665613276821000001073741824976563",
    ],
    [
      "10000072938742048910000262144323874204892401.531441",
      "10000072938742048910000262144323874204892401531441",
    ],
    [
      "643276816777216814304672151216.262144",
      "643276816777216814304672151216262144",
    ],
    [
      "16777216209715224017299409621871048576.1024",
      "16777216209715224017299409621871048576102400",
    ],
    [
      "3906251953125409620971521677721617812559049.40353607",
      "3906251953125409620971521677721617812559049403536",
    ],
    [
      "1680797656251007769677761000000001167772161.25",
      "1680797656251007769677761000000001167772161250000",
    ],
  ])("random case: %s %s", (input, output) => {
    expect(parseLovelaceAmount(input)).toBe(BigInt(output));
  });
});
